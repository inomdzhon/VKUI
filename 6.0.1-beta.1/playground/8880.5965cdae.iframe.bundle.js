"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[8880],{"../../node_modules/@vkontakte/icons/dist/es6/16/chevron_16.js":(e,t,r)=>{r.d(t,{u:()=>n});var n=(0,r("../../node_modules/@vkontakte/icons-sprite/dist/index.js").cL)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8" /></symbol>',12,16,!1,void 0)},"../../node_modules/@vkontakte/icons/dist/es6/24/chevron_24.js":(e,t,r)=>{r.d(t,{s:()=>n});var n=(0,r("../../node_modules/@vkontakte/icons-sprite/dist/index.js").cL)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a.998.998 0 0 1 0 1.416l-5.084 5.084a1.002 1.002 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12 4.706 7.706" /></g></symbol>',16,24,!1,void 0)},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css":(e,t,r)=>{r.d(t,{c:()=>o});var n=r("../../node_modules/css-loader/dist/runtime/noSourceMaps.js"),l=r.n(n),a=r("../../node_modules/css-loader/dist/runtime/api.js"),i=r.n(a)()(l());i.push([e.id,".BaseGallery--aehDU{overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.BaseGallery__viewport--I1eNk{height:100%;margin:0;position:relative}.BaseGallery--align-center--JQQn4 .BaseGallery__viewport--I1eNk{margin:0 auto}.BaseGallery__layer--nJ0KW{align-items:stretch;display:flex;height:100%;min-height:100px;width:100%}.BaseGallery--draggable--J_egI .BaseGallery__layer--nJ0KW{cursor:-webkit-grab;cursor:grab}.BaseGallery__layer--nJ0KW:empty{min-height:0}.BaseGallery__slide--N5num{flex:0 0 auto;max-width:100%;overflow:hidden;width:100%}.BaseGallery--custom-width--Cet7r .BaseGallery__slide--N5num{width:auto}.BaseGallery__slide--N5num>*{min-height:100%;width:100%}.BaseGallery__bullets--acbMd{align-items:center;bottom:10px;display:flex;height:6px;justify-content:center;left:0;position:absolute;width:100%}.BaseGallery__bullets--dark--T_Veu .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_primary_invariably)}.BaseGallery__bullets--light--wkxQq .BaseGallery__bullet--YYi6w{background-color:var(--vkui--color_icon_contrast)}.BaseGallery__bullet--YYi6w{border-radius:50%;height:6px;margin:0 3px;opacity:var(--vkui--opacity_disable_accessibility);width:6px}.BaseGallery__bullet--active--WpJY6{opacity:1}.BaseGallery__arrow--Z8JoJ{opacity:0;position:absolute;top:0}.BaseGallery--aehDU:hover .BaseGallery__arrow--Z8JoJ{opacity:var(--vkui--opacity_disable_accessibility)}.BaseGallery--aehDU .BaseGallery__arrow--Z8JoJ:hover{opacity:1}",""]),i.locals={BaseGallery:"BaseGallery--aehDU",BaseGallery__viewport:"BaseGallery__viewport--I1eNk","BaseGallery--align-center":"BaseGallery--align-center--JQQn4",BaseGallery__layer:"BaseGallery__layer--nJ0KW","BaseGallery--draggable":"BaseGallery--draggable--J_egI",BaseGallery__slide:"BaseGallery__slide--N5num","BaseGallery--custom-width":"BaseGallery--custom-width--Cet7r",BaseGallery__bullets:"BaseGallery__bullets--acbMd","BaseGallery__bullets--dark":"BaseGallery__bullets--dark--T_Veu",BaseGallery__bullet:"BaseGallery__bullet--YYi6w","BaseGallery__bullets--light":"BaseGallery__bullets--light--wkxQq","BaseGallery__bullet--active":"BaseGallery__bullet--active--WpJY6",BaseGallery__arrow:"BaseGallery__arrow--Z8JoJ"};let o=i},"./src/components/Gallery/Gallery.tsx":(e,t,r)=>{r.d(t,{M:()=>Z});var n=r("../../node_modules/react/index.js"),l=r("./src/helpers/math.ts"),a=r("./src/hooks/useIsClient.ts"),i=r("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),o=r("./src/hooks/useAdaptivityHasPointer.ts"),u=r("./src/hooks/useExternRef.ts"),s=r("./src/hooks/useGlobalEventListener.ts"),c=r("./src/lib/dom.tsx"),d=r("./src/lib/useIsomorphicLayoutEffect.ts"),f=r("./src/components/RootComponent/RootComponent.tsx"),m=r("./src/components/ScrollArrow/ScrollArrow.tsx"),y=r("./src/components/Touch/Touch.tsx"),p=function(e){var t=e.containerWidth,r=void 0===t?0:t,n=e.layerWidth,l=void 0===n?0:n,a=e.slides,i=void 0===a?[]:a,o=e.viewportOffsetWidth,u=void 0===o?0:o,s=e.align,c=e.isCenterWithCustomWidth;switch(s){case"left":return r-l;case"right":return u-l;case"center":if(!c||!i.length)return u-(r-u)/2-l;var d=i[i.length-1];return u/2-d.coordX-d.width/2}},v=function(e){var t=e.slides,r=void 0===t?[]:t,n=e.viewportOffsetWidth;if(e.isCenterWithCustomWidth&&r.length){var l=r[0],a=l.width;return(void 0===n?0:n)/2-l.coordX-a/2}return 0},h=r("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),g=r.n(h),b=r("../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js"),w=r.n(b),_=r("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),O=r.n(_),S=r("../../node_modules/style-loader/dist/runtime/setAttributesWithAttributesAndNonce.js"),B=r.n(S),G=r("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),E=r.n(G),C=r("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[15].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[15].use[2]!./src/components/BaseGallery/BaseGallery.module.css"),k={attributes:{class:"vkui-style"}};k.setAttributes=B(),k.insert=O().bind(null,"head"),k.domAPI=w(),k.insertStyleElement=E(),g()(C.c,k);let j=C.c&&C.c.locals?C.c.locals:void 0;function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,l,a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}function A(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var P={containerWidth:0,viewportOffsetWidth:0,layerWidth:0,min:0,max:0,slides:[],isFullyVisible:!0},V={animation:void 0,shiftX:0,dragging:!1,deltaX:0,indent:0},q={dark:j["BaseGallery__bullets--dark"],light:j["BaseGallery__bullets--light"]},D=function(e){var t,r,l=e.bullets,a=void 0!==l&&l,h=e.getRootRef,g=e.children,b=e.slideWidth,w=void 0===b?"100%":b,_=e.slideIndex,O=void 0===_?0:_,S=e.dragDisabled,B=e.onDragStart,G=e.onDragEnd,E=e.onChange,C=e.onPrevClick,k=e.onNextClick,D=e.align,I=void 0===D?"left":D,W=e.showArrows,X=e.getRef,N=e.arrowSize,M=void 0===N?"l":N,L=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),T=n.useRef({}),z=n.useRef(P),F=function(e){if(Array.isArray(e))return e}(t=n.useState(V))||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),J=F[0],Y=F[1],K=(0,u.K)(h),H=(0,u.K)(X),Q=(0,c.C4)().window,U=(0,o.Y)(),Z="custom"===w&&"center"===I,$=function(e){var t,r,n=null!==(t=z.current.max)&&void 0!==t?t:0,l=null!==(r=z.current.min)&&void 0!==r?r:0;return e<l?l:e>n?n:e},ee=function(e){if(z.current.isFullyVisible)return 0;var t=(null===(r=z.current.slides)||void 0===r?void 0:r.length)?z.current.slides[e]:null;if(t){var r,n,l=t.coordX,a=t.width;return Z?(null!==(n=z.current.viewportOffsetWidth)&&void 0!==n?n:0)/2-l-a/2:$(-1*l)}return 0},et=function(){var e,t,r=null!==(e=z.current.max)&&void 0!==e?e:0,n=null!==(t=z.current.min)&&void 0!==t?t:0,l=J.shiftX+J.deltaX;return l>r?r+Number((l-r)/3):l<n?n+Number((l-n)/3):l},er=function(){var e,t,r,l,a,i,o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=null!==(a=n.Children.map(g,function(e,t){var r,n,l=T.current["slide-".concat(t)];return{coordX:null!==(r=null==l?void 0:l.offsetLeft)&&void 0!==r?r:0,width:null!==(n=null==l?void 0:l.offsetWidth)&&void 0!==n?n:0}}))&&void 0!==a?a:[],c=null!==(i=null===(e=K.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==i?i:0,d=null!==(o=null===(t=H.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==o?o:0,f=s.reduce(function(e,t){return t.width+e},0),m=s.length<=z.current.slides.length||(null===(r=z.current.slides[O])||void 0===r?void 0:r.coordX)!==(null===(l=s[O])||void 0===l?void 0:l.coordX);z.current={containerWidth:c,viewportOffsetWidth:d,layerWidth:f,max:v({slides:s,viewportOffsetWidth:d,isCenterWithCustomWidth:Z}),min:p({containerWidth:c,layerWidth:f,slides:s,viewportOffsetWidth:d,isCenterWithCustomWidth:Z,align:I}),slides:s,isFullyVisible:f<=c},Y(function(e){var t;return A(R({},e),{shiftX:m?ee(O):e.shiftX,animation:null!==(t=u.animation)&&void 0!==t?t:e.shiftX===$(e.shiftX)})})};(0,s.m)(Q,"resize",function(){void 0!==J.animation&&er({animation:!1})}),(0,d.M)(function(){er({animation:!1})},[g,I,w]),(0,d.M)(function(){void 0!==J.animation&&Y(function(e){return A(R({},e),{animation:!0,deltaX:0,shiftX:ee(null!=O?O:0)})})},[O]);var en=function(e){var t,r=J.deltaX/e.duration*144,n=J.shiftX+J.deltaX+r-(null!==(t=z.current.max)&&void 0!==t?t:0),l=J.deltaX<0?1:-1,a=z.current.slides.reduce(function(e,t,r){return Math.abs(z.current.slides[e].coordX+n)<Math.abs(t.coordX+n)?e:r},O);if(a===O){var i=O+l;i>=0&&i<z.current.slides.length&&Math.abs(J.deltaX)>.05*z.current.slides[i].width&&(a=i)}return a},el=!(void 0!==S&&S)&&!z.current.isFullyVisible,ea=J.dragging?et():J.shiftX,ei={WebkitTransform:"translateX(".concat(ea,"px)"),transform:"translateX(".concat(ea,"px)"),WebkitTransition:J.animation?"-webkit-transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none",transition:J.animation?"transform ".concat(.24,"s cubic-bezier(.1, 0, .25, 1)"):"none"},eo=function(e,t){T.current["slide-".concat(t)]=e},eu=!z.current.isFullyVisible&&J.shiftX<0,es=!z.current.isFullyVisible&&("left"===I&&z.current.containerWidth-J.shiftX<(null!==(r=z.current.layerWidth)&&void 0!==r?r:0)||"left"!==I&&O<z.current.slides.length-1);return n.createElement(f.Q,A(R({},L),{baseClassName:(0,i.gr)(j.BaseGallery,"center"===I&&j["BaseGallery--align-center"],"custom"===w&&j["BaseGallery--custom-width"],el&&j["BaseGallery--draggable"]),getRootRef:K}),n.createElement(y.i,{className:j.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),el&&(null==B||B(e),Y(function(e){return A(R({},e),{animation:!1})}))},onMoveX:function(e){el&&(e.originalEvent.preventDefault(),e.isSlideX&&J.deltaX!==e.shiftX&&Y(function(t){return A(R({},t),{deltaX:e.shiftX,dragging:e.isSlideX})}))},onEnd:function(e){if(el){var t=e.isSlide?en(e):null!=O?O:0;null==G||G(e,t);var r={animation:!0,dragging:!1,deltaX:0},n=et();t!==O&&(r.shiftX=n),Y(function(e){return R({},e,r)}),t!==O&&(null==E||E(t))}},style:{width:"custom"===w?"100%":w},getRootRef:H,noSlideClick:!0},n.createElement("div",{className:j.BaseGallery__layer,style:ei},n.Children.map(g,function(e,t){return n.createElement("div",{className:j.BaseGallery__slide,key:"slide-".concat(t),ref:function(e){return eo(e,t)}},e)}))),a&&n.createElement("div",{"aria-hidden":!0,className:(0,i.gr)(j.BaseGallery__bullets,q[a])},n.Children.map(g,function(e,t){return n.createElement("div",{className:(0,i.gr)(j.BaseGallery__bullet,t===O&&j["BaseGallery__bullet--active"]),key:t})})),W&&U&&eu&&n.createElement(m.E,{className:j.BaseGallery__arrow,direction:"left",onClick:function(e){null==E||E(O-1),null==C||C(e)},size:M}),W&&U&&es&&n.createElement(m.E,{className:j.BaseGallery__arrow,direction:"right",onClick:function(e){null==E||E(O+1),null==k||k(e)},size:M}))};try{D.displayName="BaseGallery",D.__docgenInfo={description:"",displayName:"BaseGallery",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/BaseGallery.tsx#BaseGallery"]={docgenInfo:D.__docgenInfo,name:"BaseGallery",path:"src/components/BaseGallery/BaseGallery.tsx#BaseGallery"})}catch(e){}var I=r("./src/lib/warnOnce.ts"),W={canSlideLeft:!0,canSlideRight:!0,isDraggable:!0},X={viewportOffsetWidth:0,slides:[],isFullyVisible:!0,loopPoints:[],contentSize:0,snaps:[]};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t,r){for(var n=r,l=[],a=1===e?0:t.length-1,i=1===e?t.length-1:0,o=a;(1===e?o<=i:o>=i)&&n>0;o+=e){var u=t[o].width;n>0&&l.push(o),n-=u}return l}function T(e,t,r,n){var l=r.contentSize,a=r.slides,i=r.snaps,o="start"===t,u=o?-l:l;return e.map(function(e){var t=o?0:-l,r=o?l:0,s=o?i[e]+n+u:i[e]-a[e].width+u-i[0];return{index:e,target:function(e){return e>=s?t:r}}})}var z=(0,r("./src/lib/fx.ts").u)(.8,1);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,l,a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}function Y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var K={dark:j["BaseGallery__bullets--dark"],light:j["BaseGallery__bullets--light"]};(0,I.w)("Gallery");var H=function(e){var t,r,l=e.bullets,a=void 0!==l&&l,p=e.getRootRef,v=e.children,h=e.slideWidth,g=void 0===h?"100%":h,b=e.slideIndex,w=void 0===b?0:b,_=e.dragDisabled,O=void 0!==_&&_,S=e.onDragStart,B=e.onDragEnd,G=e.onChange,E=e.onPrevClick,C=e.onNextClick,k=e.align,x=void 0===k?"left":k,R=e.showArrows,A=e.getRef,P=e.arrowSize,V=void 0===P?"l":P,q=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["bullets","getRootRef","children","slideWidth","slideIndex","dragDisabled","onDragStart","onDragEnd","onChange","onPrevClick","onNextClick","align","showArrows","getRef","arrowSize"]),D=n.useRef({}),I=n.useRef(X),N=(0,u.K)(p),H=(0,u.K)(A),Q=n.useRef(null),U=n.useRef(null),Z=n.useRef(0),$=n.useRef(0),ee=n.useRef(!1),et=(t=n.useRef([]),{getAnimateFunction:function(e){return function(){var r,n,l,a,o,u,s;l=(r={duration:240,timing:z,animationQueue:t.current,draw:e}).duration,a=r.timing,o=r.draw,s=void 0===(u=r.animationQueue)?[]:u,i.H4&&requestAnimationFrame(function e(t){n||(n=t);var r=Math.min((t-n)/l,1);if(o(a(r)),r<1){requestAnimationFrame(e);return}s.shift(),s.length>0&&s[0]()})}},addToAnimationQueue:function(e){t.current.push(e)},startAnimation:function(){1===t.current.length&&t.current[0]()}}),er=et.addToAnimationQueue,en=et.getAnimateFunction,el=et.startAnimation,ea=function(e){if(Array.isArray(e))return e}(r=n.useState(W))||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(r,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),ei=ea[0],eo=ea[1],eu=(0,c.C4)().window,es=(0,o.Y)(),ec="custom"===g&&"center"===x,ed=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I.current.loopPoints.forEach(function(t){var r=t.target,n=t.index,l=D.current[n];l&&(l.style.transform="translate3d(".concat(r(e),"px, 0, 0)"))}),Q.current&&(Q.current.style.transform="translate3d(".concat(e,"px, 0, 0)"),Q.current.style.transition=t?"transform ".concat(240,"ms cubic-bezier(.1, 0, .25, 1)"):"")},ef=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=I.current,n=r.snaps,l=r.contentSize,a=r.slides;null!==U.current&&cancelAnimationFrame(U.current),U.current=requestAnimationFrame(function(){e>n[0]&&(Z.current=-l+n[0],e=Z.current+$.current);var r=a[a.length-1].width+a[a.length-1].coordX;e<=-r&&(Z.current=Math.abs($.current)+n[0]),ed(e,t)})},em=function(){if(N.current&&H.current){var e,t,r,l,a=n.Children.map(v,function(e,t){var r=D.current[t]||{offsetLeft:0,offsetWidth:0};return{coordX:r.offsetLeft,width:r.offsetWidth}})||[],i=N.current.offsetWidth,o=H.current.offsetWidth,u=a.reduce(function(e,t){return t.width+e},0);if("center"===x){var s=(i-a[0].width)/2;a=a.map(function(e){return{width:e.width,coordX:e.coordX-s}})}I.current=Y(J({},I.current),{viewportOffsetWidth:o,slides:a,isFullyVisible:u<=i});var c=a.map(function(e,t){return function(e,t,r){if(t.isFullyVisible||!t.slides.length)return 0;var n=t.slides[e];if(n){var l=n.coordX,a=n.width;return r?t.viewportOffsetWidth/2-l-a/2:-1*l}return 0}(t,I.current,ec)}),d=-c[c.length-1]+a[a.length-1].width;"center"===x&&(d+=c[0]),I.current.snaps=c,I.current.contentSize=d,I.current.loopPoints=(l=L(-1,t=(e=I.current).slides,(r=e.snaps)[0]),M(T(L(1,t,i-r[0]),"start",e,i)).concat(M(T(l,"end",e,i)))),eo({canSlideLeft:!I.current.isFullyVisible,canSlideRight:!I.current.isFullyVisible,isDraggable:!(O||I.current.isFullyVisible)}),Z.current=c[w],ee.current=!0,ef(Z.current)}};(0,s.m)(eu,"resize",function(){ee.current&&em()}),(0,d.M)(function(){if(ee.current){var e=I.current,t=e.snaps,r=e.slides,n=t[w],l=Z.current;if(n===t[0]&&Z.current<=t[t.length-1]){var a=Math.abs(t[t.length-1])+r[r.length-1].width+l;er(en(function(e){var i=l+-(e*a*1);ed(i),i<=t[t.length-1]-r[r.length-1].width&&requestAnimationFrame(function(){Z.current=n,ed(t[0])})}))}else n===t[t.length-1]&&Z.current===t[0]?(l=n-r[r.length-1].width,er(function(){requestAnimationFrame(function(){ed(n-r[r.length-1].width),en(function(e){ed(l+e*r[r.length-1].width)})()})})):er(function(){var e=Math.abs(n-l),t=l<=n?1:-1;en(function(r){ed(l+r*e*t)})()});el(),Z.current=n}},[w]),(0,d.M)(function(){em()},[v,x,g]);var ey=function(e,t){D.current[t]=e},ep=ei.canSlideLeft,ev=ei.canSlideRight,eh=ei.isDraggable;return n.createElement(f.Q,Y(J({},q),{baseClassName:(0,i.gr)(j.BaseGallery,"custom"===g&&j["BaseGallery--custom-width"],eh&&j["BaseGallery--draggable"]),getRootRef:N}),n.createElement(y.i,{className:j.BaseGallery__viewport,onStartX:function(e){e.originalEvent.stopPropagation(),ei.isDraggable&&(null==S||S(e),Z.current=I.current.snaps[w],$.current=0)},onMoveX:function(e){ei.isDraggable&&(e.originalEvent.preventDefault(),e.isSlideX&&$.current!==e.shiftX&&($.current=e.shiftX,ef(Z.current+$.current)))},onEnd:function(e){if(ei.isDraggable){var t=w;e.isSlide&&(t=function(e,t,r,n){var l=r+n,a=n<0?1:-1,i=e.reduce(function(t,r,n){return Math.abs(e[t].coordX+l)<Math.abs(r.coordX+l)?t:n},t);if(i===t){var o=t+a;return o>=0&&o<e.length?Math.abs(n)>.05*e[o].width?o:i:a<0?(o+e.length)%e.length:o%e.length}return i}(I.current.slides,w,Z.current,$.current)),null==B||B(e,t),t!==w?(Z.current=Z.current+$.current,null==G||G(t)):ef(I.current.snaps[t],!0)}},style:{width:"custom"===g?"100%":g},getRootRef:H,noSlideClick:!0},n.createElement("div",{className:j.BaseGallery__layer,ref:Q},n.Children.map(v,function(e,t){return n.createElement("div",{className:j.BaseGallery__slide,key:"slide-".concat(t),ref:function(e){return ey(e,t)}},e)}))),a&&n.createElement("div",{"aria-hidden":!0,className:(0,i.gr)(j.BaseGallery__bullets,K[a])},n.Children.map(v,function(e,t){return n.createElement("div",{className:(0,i.gr)(j.BaseGallery__bullet,t===w&&j["BaseGallery__bullet--active"]),key:t})})),R&&es&&ep&&n.createElement(m.E,{className:j.BaseGallery__arrow,direction:"left",onClick:function(e){null==G||G((w-1+I.current.slides.length)%I.current.slides.length),null==E||E(e)},size:V}),R&&es&&ev&&n.createElement(m.E,{className:j.BaseGallery__arrow,direction:"right",onClick:function(e){null==G||G((w+1)%I.current.slides.length),null==C||C(e)},size:V}))};try{H.displayName="CarouselBase",H.__docgenInfo={description:"",displayName:"CarouselBase",props:{slideWidth:{defaultValue:{value:"100%"},description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:{value:"0"},description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:{value:"false"},description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:{value:"false"},description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:{value:"l"},description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"]={docgenInfo:H.__docgenInfo,name:"CarouselBase",path:"src/components/BaseGallery/CarouselBase/CarouselBase.tsx#CarouselBase"})}catch(e){}var Q=r("./src/hooks/useTimeout.ts");function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t,r,i,o,u,s,d,f,m,y,p=e.initialSlideIndex,v=e.children,h=e.timeout,g=e.onChange,b=e.bullets,w=e.looped,_=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["initialSlideIndex","children","timeout","onChange","bullets","looped"]),O=function(e){if(Array.isArray(e))return e}(t=n.useState(void 0===p?0:p))||function(e,t){var r,n,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var a=[],i=!0,o=!1;try{for(l=l.call(e);!(i=(r=l.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return U(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=O[0],B=O[1],G="number"==typeof _.slideIndex,E=G?null!==(y=_.slideIndex)&&void 0!==y?y:0:S,C=n.useMemo(function(){return n.Children.toArray(v).filter(function(e){return!!e})},[v]),k=C.length,j=(0,a.q)(),x=n.useCallback(function(e){e!==E&&(G||B(e),g&&g(e))},[G,g,E]);r=void 0===h?0:h,i=function(){return x((E+1)%k)},u=(o=(0,Q.w)(i,r)).clear,s=o.set,d=(0,c.C4)().document,n.useEffect(function(){return r?s():u()},[r,E,u,s]),n.useEffect(function(){if(d&&r){var e=function(){"visible"===d.visibilityState&&(u(),s()),"hidden"===d.visibilityState&&u()};return d.addEventListener("visibilitychange",e),function(){d.removeEventListener("visibilitychange",e)}}},[d,r,u,s]);var R=k>0?(0,l.qk)(E,0,k-1):E;if(n.useEffect(function(){g&&R!==E&&g(R),B(R)},[g,R,E]),!j)return null;var A=w?H:D;return n.createElement(A,(f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,l,a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}({dragDisabled:G&&!g},_),m=m={bullets:k>0&&b,slideIndex:R,onChange:x},Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(m)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(m)).forEach(function(e){Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(m,e))}),f),C)};try{Z.displayName="Gallery",Z.__docgenInfo={description:"",displayName:"Gallery",props:{initialSlideIndex:{defaultValue:{value:"0"},description:"",name:"initialSlideIndex",required:!1,type:{name:"number"}},timeout:{defaultValue:{value:"0"},description:"",name:"timeout",required:!1,type:{name:"number"}},looped:{defaultValue:null,description:"",name:"looped",required:!1,type:{name:"boolean"}},slideWidth:{defaultValue:null,description:"",name:"slideWidth",required:!1,type:{name:"string | number"}},slideIndex:{defaultValue:null,description:"",name:"slideIndex",required:!1,type:{name:"number"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"TouchEventHandler"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((e: TouchEvent, targetIndex: number) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((current: number) => void)"}},onPrevClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку влево",name:"onPrevClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onNextClick:{defaultValue:null,description:"Будет вызвано при клике на кнопку-стрелку вправо",name:"onNextClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},bullets:{defaultValue:null,description:"",name:"bullets",required:!1,type:{name:'false | "dark" | "light"'}},dragDisabled:{defaultValue:null,description:"Позволяет отключить реагирование на тач-события",name:"dragDisabled",required:!1,type:{name:"boolean"}},showArrows:{defaultValue:null,description:"",name:"showArrows",required:!1,type:{name:"boolean"}},hasPointer:{defaultValue:null,description:"",name:"hasPointer",required:!1,type:{name:"boolean"}},arrowSize:{defaultValue:null,description:"",name:"arrowSize",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"l"'}]}},arrowPrevLabel:{defaultValue:null,description:"Текст для кнопки-стрелки влево (назад). Делает ее доступной для ассистивных технологий",name:"arrowPrevLabel",required:!1,type:{name:"string"}},arrowNextLabel:{defaultValue:null,description:"Текст для кнопки-стрелки вправо (вперед). Делает ее доступной для ассистивных технологий",name:"arrowNextLabel",required:!1,type:{name:"string"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"right"'},{value:'"left"'}]}},getRef:{defaultValue:null,description:"",name:"getRef",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Gallery/Gallery.tsx#Gallery"]={docgenInfo:Z.__docgenInfo,name:"Gallery",path:"src/components/Gallery/Gallery.tsx#Gallery"})}catch(e){}}}]);