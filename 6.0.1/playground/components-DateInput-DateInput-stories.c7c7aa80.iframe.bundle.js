"use strict";(self.webpackChunk_vkontakte_vkui=self.webpackChunk_vkontakte_vkui||[]).push([[1119],{"./src/components/DateInput/DateInput.stories.tsx":(e,n,t)=>{t.r(n),t.d(n,{Playground:()=>R,__namedExportsOrder:()=>V,default:()=>C});var a=t("../../node_modules/react/index.js"),l=t("./src/storybook/constants.ts"),o=t("../../node_modules/@vkontakte/icons/dist/es6/16/clear_16.js"),r=t("../../node_modules/@vkontakte/icons/dist/es6/20/calendar_outline_20.js"),u=t("../../node_modules/@vkontakte/vkjs/lib/es6/index.js"),i=t("./src/hooks/useAdaptivity.ts"),s=t("./src/hooks/useDateInput.ts"),c=t("./src/hooks/useExternRef.ts"),d=t("./src/lib/callMultiple.ts"),p=t("./src/lib/date.ts"),m=t("./src/components/Calendar/Calendar.tsx"),b=t("./src/components/FormField/FormField.tsx"),v=t("./src/components/IconButton/IconButton.tsx"),h=t("./src/components/InputLike/InputLike.tsx"),g=t("./src/components/InputLike/InputLikeDivider.tsx"),f=t("./src/components/Popper/Popper.tsx"),y=t("./src/components/Typography/Text/Text.tsx");t("./src/components/InputLike/InputLike.module.css");var D=t("./src/components/DateInput/DateInput.module.css");function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var L=M({none:D.c["DateInput--sizeY-none"]},"compact",D.c["DateInput--sizeY-compact"]),k=function(e){var n=2,t=1,a=0;switch(e){case 0:a=31;break;case 1:a=12;break;case 2:a=2100,t=1900,n=4;break;case 3:a=23;break;case 4:a=59}return{length:n,min:t,max:a}},I=function(e){var n=["","","","",""];return e&&(n[0]=String(e.getDate()).padStart(2,"0"),n[1]=String(e.getMonth()+1).padStart(2,"0"),n[2]=String(e.getFullYear()).padStart(4,"0"),n[3]=String(e.getHours()).padStart(2,"0"),n[4]=String(e.getMinutes()).padStart(2,"0")),n},x=function(e){var n=e.enableTime,t=e.shouldDisableDate,l=e.disableFuture,x=e.disablePast,O=e.value,C=e.onChange,R=e.calendarPlacement,V=e.style,w=e.className,E=e.doneButtonText,P=e.closeOnChange,q=void 0===P||P,S=e.disablePickers,F=e.getRootRef,_=e.name,j=e.autoFocus,Y=e.disabled,N=e.onClick,T=e.onFocus,H=e.prevMonthLabel,B=e.nextMonthLabel,z=e.showNeighboringMonth,K=e.size,A=e.changeMonthLabel,U=void 0===A?"Изменить месяц":A,Q=e.changeYearLabel,W=void 0===Q?"Изменить год":Q,G=e.changeDayLabel,J=void 0===G?"Изменить день":G,X=e.changeHoursLabel,Z=void 0===X?"Изменить час":X,$=e.changeMinutesLabel,ee=void 0===$?"Изменить минуту":$,en=e.clearFieldLabel,et=e.showCalendarLabel,ea=e.viewDate,el=e.onHeaderChange,eo=e.onNextMonth,er=e.onPrevMonth,eu=e.prevMonthIcon,ei=e.nextMonthIcon,es=e.disableCalendar,ec=function(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}(e,["enableTime","shouldDisableDate","disableFuture","disablePast","value","onChange","calendarPlacement","style","className","doneButtonText","closeOnChange","disablePickers","getRootRef","name","autoFocus","disabled","onClick","onFocus","prevMonthLabel","nextMonthLabel","showNeighboringMonth","size","changeMonthLabel","changeYearLabel","changeDayLabel","changeHoursLabel","changeMinutesLabel","clearFieldLabel","showCalendarLabel","viewDate","onHeaderChange","onNextMonth","onPrevMonth","prevMonthIcon","nextMonthIcon","disableCalendar"]),ed=a.useRef(null),ep=a.useRef(null),em=a.useRef(null),eb=a.useRef(null),ev=a.useRef(null),eh=n?4:2,eg=a.useCallback(function(e){for(var t=0;t<=eh;t+=1)if(e[t].length<k(t).length)return;var a="".concat(e[0],".").concat(e[1],".").concat(e[2]),l="DD.MM.YYYY";n&&(a+=" ".concat(e[3],":").concat(e[4]),l+=" HH:mm"),(0,p.wf)(a,l)&&(null==C||C((0,p.K0)(a,l,null!=O?O:new Date)))},[n,eh,C,O]),ef=a.useMemo(function(){return[ed,ep,em,eb,ev]},[ed,ep,em,eb,ev]),ey=(0,s.i)({maxElement:eh,refs:ef,autoFocus:j,disabled:Y,elementsConfig:k,onChange:C,onInternalValueChange:eg,getInternalValue:I,value:O}),eD=ey.rootRef,eM=ey.calendarRef,eL=ey.open,ek=ey.openCalendar,eI=ey.internalValue,ex=ey.handleKeyDown,eO=ey.setFocusedElement,eC=ey.handleFieldEnter,eR=ey.clear,eV=ey.removeFocusFromField,ew=(0,i._)().sizeY,eE=void 0===ew?"none":ew,eP=(0,c.K)(eD,F),eq=a.useCallback(function(e){null==C||C(e),q&&!n&&eV()},[C,eV,q,n]);return a.createElement(b.W,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){M(e,n,t[n])})}return e}({style:V,className:(0,u.gr)("regular"!==eE&&L[eE],w),getRootRef:eP,after:O?a.createElement(v.w,{hoverMode:"opacity",label:void 0===en?"Очистить поле":en,onClick:eR},a.createElement(o.O,null)):a.createElement(v.w,{hoverMode:"opacity",label:void 0===et?"Показать календарь":et,onClick:ek},a.createElement(r.c,null)),disabled:Y,onClick:(0,d.m)(eC,N),onFocus:(0,d.m)(eC,T)},ec),a.createElement("input",{type:"hidden",name:_,value:O?(0,p.E9)(O,n?"DD.MM.YYYYTHH:mm":"DD.MM.YYYY"):""}),a.createElement(y.a,{className:D.c.DateInput__input,onKeyDown:ex},a.createElement(h.i,{length:2,getRootRef:ed,index:0,onElementSelect:eO,value:eI[0],label:J}),a.createElement(g.o,null,"."),a.createElement(h.i,{length:2,getRootRef:ep,index:1,onElementSelect:eO,value:eI[1],label:U}),a.createElement(g.o,null,"."),a.createElement(h.i,{length:4,getRootRef:em,index:2,onElementSelect:eO,value:eI[2],label:W}),n&&a.createElement(a.Fragment,null,a.createElement(g.o,{className:D.c["DateInput__input--time-divider"]}," "),a.createElement(h.i,{length:2,getRootRef:eb,index:3,onElementSelect:eO,value:eI[3],label:Z}),a.createElement(g.o,null,":"),a.createElement(h.i,{length:2,getRootRef:ev,index:4,onElementSelect:eO,value:eI[4],label:ee}))),eL&&!(void 0!==es&&es)&&a.createElement(f.Q,{targetRef:eD,offsetByMainAxis:8,placement:void 0===R?"bottom-start":R,autoUpdateOnTargetResize:!0},a.createElement(m.Y,{value:O,onChange:eq,enableTime:n,disablePast:x,disableFuture:l,shouldDisableDate:t,onClose:eV,getRootRef:eM,doneButtonText:E,disablePickers:S,changeHoursLabel:Z,changeMinutesLabel:ee,prevMonthLabel:void 0===H?"Предыдущий месяц":H,nextMonthLabel:void 0===B?"Следующий месяц":B,changeMonthLabel:U,changeYearLabel:W,changeDayLabel:J,showNeighboringMonth:z,size:K,viewDate:ea,onHeaderChange:el,onNextMonth:eo,onPrevMonth:er,prevMonthIcon:eu,nextMonthIcon:ei})))};try{x.displayName="DateInput",x.__docgenInfo={description:"",displayName:"DateInput",props:{calendarPlacement:{defaultValue:{value:"bottom-start"},description:"",name:"calendarPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},closeOnChange:{defaultValue:{value:"true"},description:"",name:"closeOnChange",required:!1,type:{name:"boolean"}},clearFieldLabel:{defaultValue:{value:"Очистить поле"},description:"",name:"clearFieldLabel",required:!1,type:{name:"string"}},showCalendarLabel:{defaultValue:{value:"Показать календарь"},description:"",name:"showCalendarLabel",required:!1,type:{name:"string"}},disableCalendar:{defaultValue:{value:"false"},description:"",name:"disableCalendar",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Date"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: Date) => void)"}},disablePast:{defaultValue:null,description:"",name:"disablePast",required:!1,type:{name:"boolean"}},disableFuture:{defaultValue:null,description:"",name:"disableFuture",required:!1,type:{name:"boolean"}},shouldDisableDate:{defaultValue:null,description:"",name:"shouldDisableDate",required:!1,type:{name:"((value: Date) => boolean)"}},weekStartsOn:{defaultValue:null,description:"",name:"weekStartsOn",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"}]}},disablePickers:{defaultValue:null,description:"",name:"disablePickers",required:!1,type:{name:"boolean"}},prevMonthLabel:{defaultValue:{value:"Предыдущий месяц"},description:"",name:"prevMonthLabel",required:!1,type:{name:"string"}},nextMonthLabel:{defaultValue:{value:"Следующий месяц"},description:"",name:"nextMonthLabel",required:!1,type:{name:"string"}},changeMonthLabel:{defaultValue:{value:"Изменить месяц"},description:"",name:"changeMonthLabel",required:!1,type:{name:"string"}},changeYearLabel:{defaultValue:{value:"Изменить год"},description:"",name:"changeYearLabel",required:!1,type:{name:"string"}},changeDayLabel:{defaultValue:{value:"Изменить день"},description:"",name:"changeDayLabel",required:!1,type:{name:"string"}},prevMonthIcon:{defaultValue:null,description:"",name:"prevMonthIcon",required:!1,type:{name:"ReactNode"}},nextMonthIcon:{defaultValue:null,description:"",name:"nextMonthIcon",required:!1,type:{name:"ReactNode"}},enableTime:{defaultValue:null,description:"",name:"enableTime",required:!1,type:{name:"boolean"}},doneButtonText:{defaultValue:null,description:"",name:"doneButtonText",required:!1,type:{name:"string"}},changeHoursLabel:{defaultValue:{value:"Изменить час"},description:"",name:"changeHoursLabel",required:!1,type:{name:"string"}},changeMinutesLabel:{defaultValue:{value:"Изменить минуту"},description:"",name:"changeMinutesLabel",required:!1,type:{name:"string"}},showNeighboringMonth:{defaultValue:null,description:"",name:"showNeighboringMonth",required:!1,type:{name:"boolean"}},viewDate:{defaultValue:null,description:"Дата отображаемого месяца.\nПри использовании обновление даты должно происходить вне компонента.",name:"viewDate",required:!1,type:{name:"Date"}},onHeaderChange:{defaultValue:null,description:"Изменение даты в шапке календаря.",name:"onHeaderChange",required:!1,type:{name:"((value: Date) => void)"}},onNextMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на следующий месяц.",name:"onNextMonth",required:!1,type:{name:"(() => void)"}},onPrevMonth:{defaultValue:null,description:"Нажатие на кнопку переключения на предыдущий месяц.",name:"onPrevMonth",required:!1,type:{name:"(() => void)"}},getRootRef:{defaultValue:null,description:"",name:"getRootRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"valid"'}]}},before:{defaultValue:null,description:"Добавляет иконку слева.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"Добавляет иконку справа.\n\nРекомендации:\n\n- Используйте следующие размеры иконок `12` | `16` | `20` | `24` | `28`.\n- Используйте [IconButton](https://vkcom.github.io/VKUI/#/IconButton), если вам нужна кликабельная иконка.",name:"after",required:!1,type:{name:"ReactNode"}},mode:{defaultValue:null,description:"Режим отображения.\n\n- `default` — показывает фон, обводку и, при наличии, текст-подсказку.\n- `plain` — показывает только текст-подсказку.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"plain"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateInput/DateInput.tsx#DateInput"]={docgenInfo:x.__docgenInfo,name:"DateInput",path:"src/components/DateInput/DateInput.tsx#DateInput"})}catch(e){}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){var a,l,o;o=t[n],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return e}let C={title:"Forms/DateInput",component:x,parameters:O({},l.wj,l.iM),argTypes:{value:{control:{type:"date"}}}};var R={render:function(e){var n=e.value,t=function(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}(e,["value"]),l=n?new Date(n):n;return a.createElement(x,O({value:l},t))}};R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:"{\n  render: ({\n    value,\n    ...args\n  }) => {\n    const parsedValue = value ? new Date(value) : value;\n    return <DateInput value={parsedValue} {...args} />;\n  }\n}",...R.parameters?.docs?.source}}};let V=["Playground"]}}]);